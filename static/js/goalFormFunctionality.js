let milestoneNum = 1;

class MilestoneUI {
    constructor(milestoneNum) {
        this.milestoneNum = milestoneNum;
        this.taskNum = 0;
    }

    generateMilestoneFieldHTML() {
        milestoneNum++;
        let div = $(`
            <div class="milestone-group" id="milestone-${ this.milestoneNum }">
                <div class="field-group">
                    <p class="text-faded">Add some milestones to get there!</p>
                    <label for="milestone-${ this.milestoneNum }-title">Milestone ${ this.milestoneNum }</label>
                    <input type="text" name="milestone-${ this.milestoneNum }-title">
                </div>
    
                <div class="field-group mb-0">
                    <p class="text-faded">Add some tasks to complete your milestone</p>
                    <label class="text-underline" for="milestone-${ this.milestoneNum }-task-${ this.taskNum }">Add Milestone Tasks</label>
                    
                </div>
                <div id="task-section-${ this.milestoneNum }">
                    <!-- HTML generated by JS will be appended here -->
                </div>
                <div class="field-group mb-0">
                    <button id="taskbtn-milestone-${ this.milestoneNum }" class="add-task-button"><i class="fas fa-plus fa-2x"></i></button>
                </div>
            </div>
        `);
        $("#temp-milestone").append(div);
        $(`#taskbtn-milestone-${ this.milestoneNum }`).mousedown((e) => {
            e.preventDefault();
            console.log("clicked");
            this.generateTaskFieldHTML(this.milestoneNum);
        });
    }

    generateTaskFieldHTML() {
        this.taskNum++;
        let div = $(`
            <div class="field-group">
                <label for="milestone-${ this.milestoneNum }-task-${ this.taskNum }">Task ${ this.taskNum }</label>
                <input type="text" name="milestone-${ this.milestoneNum }-task-${ this.taskNum }">
            </div>
        `);
        $(`#task-section-${this.milestoneNum}`).append(div);
    }
}

new MilestoneUI(milestoneNum).generateMilestoneFieldHTML();

const $addMilestoneBtn = $("#add-milestone-button")
$addMilestoneBtn.mousedown((e) => {
    e.preventDefault();
    const newMilestone = new MilestoneUI(milestoneNum);
    newMilestone.generateMilestoneFieldHTML();
});